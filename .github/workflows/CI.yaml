name: CI â€” Lint (Docker & Python)

on:
  push:
    branches:
      - main
      - phase-*
  pull_request:

jobs:

  hadolint:
    name: ğŸ³ Hadolint (Dockerfile)
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Run hadolint
        uses: hadolint/hadolint-action@v3.1.0
        with:
          dockerfile: app/Dockerfile
          failure-threshold: warning

  pylint:
    name: ğŸ Pylint (Python)
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: Install pylint
        run: |
          python -m pip install --upgrade pip
          pip install pylint
          pip install -r app/requirements.txt

      - name: Run pylint
        run: |
          pylint app
